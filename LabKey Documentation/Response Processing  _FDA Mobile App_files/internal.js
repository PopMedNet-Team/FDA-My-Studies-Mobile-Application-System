var _helpDiv=null;var _mouseInHelpDiv=false;var _showTimer;var _hideTimer;function getHelpDiv(){if(!_helpDiv){_helpDiv=document.getElementById("helpDiv");document.addEventListener("keyup",helpDivHideHandler);document.addEventListener("click",helpDivHideHandler)}return _helpDiv}function showHelpDivDelay(d,a,e,c,b){_showTimer=setTimeout(function(){showHelpDiv(d,a,e,c)},b?b:400)}function showHelpDiv(c,o,n,b){var e=12;var g=8;var d=c;if(_hideTimer){clearTimeout(_hideTimer)}while(d&&d.tagName!="BODY"&&d.tagName!="HTML"){e+=d.offsetLeft-d.scrollLeft;g+=d.offsetTop-d.scrollTop;d=d.offsetParent}if(!d){return}g+=c.offsetHeight;var a=getHelpDiv();a.anchorElem=c;document.getElementById("helpDivTitle").innerHTML=o;document.getElementById("helpDivBody").innerHTML=n;var f=jQuery;var h=f(document);var i={height:h.height(),width:h.width()};var j={left:h.scrollLeft(),top:h.scrollTop()};a.style.top=g+"px";a.style.display="block";a.style.zIndex="1050";var m=document.getElementById("helpDivTable");m.style.width=(b?b:"250px");var l=m.offsetWidth;if(i.width+j.left<l+e+10){e=i.width+j.left-l-25}var k=m.clientHeight;if(k&&(i.height+j.top<k+g+10)){g=i.height+j.top-k-25;a.style.top=g+"px"}a.style.left=e+"px";return false}function hideHelpDiv(a){if(a||!_mouseInHelpDiv){getHelpDiv().style.display="none"}return false}function hideHelpDivDelay(){if(_showTimer){clearTimeout(_showTimer)}_hideTimer=setTimeout("hideHelpDiv(false);",500)}function helpDivHideHandler(d){function c(f,g){var e=g.parentNode;return f===e||!!(e&&e.nodeType===1&&f.contains(e))}if(getHelpDiv().style.display!="none"){var b=d.type=="keyup"&&d.which==27;var a=d.target==getHelpDiv().anchorElem||c(getHelpDiv().anchorElem,d.target);if(b||(d.type=="click"&&!a&&!c(getHelpDiv(),d.target))){hideHelpDiv(true)}}}function showPathname(a,c){var f=jQuery;var g=a.value;var d=g.indexOf("/")>-1?"/":"\\";var b=g.substring(g.lastIndexOf(d)+1,g.length);var e=LABKEY.Utils.isString(c)?f("#"+c):f(c);if(e.length){e.html(["<table>","<tr>",'<td style="padding: 0 5px;">'+(b==""?"":('<img src="'+LABKEY.Utils.getFileIconUrl(b)+'"/>'))+"</td>","<td>"+LABKEY.Utils.encodeHtml(b)+"</td>","</tr>","</table>"].join(""))}return true}var filePickerIndex=-1;function addFilePicker(d,h){var a=function(i){return((i<10)?"0":"")+i};var e=document.getElementById(d);var c=e.insertRow(-1);filePickerIndex++;c.id="row"+filePickerIndex;c.style.minHeight="20px";var b=c.insertCell(0);var g="formFile"+a(filePickerIndex);b.innerHTML='<input type="file" id="'+g+'" name="formFiles['+a(filePickerIndex)+']" size="45" onChange="showPathname(this, \'filename'+a(filePickerIndex)+'\')" style="border: none; background-color: transparent;">';var f=c.insertCell(1);f.innerHTML="<table><tr><td><a href=\"javascript:removeFilePicker('"+d+"', '"+h+"', '"+c.id+'\')">&nbsp;remove</a></td><td><span id="filename'+a(filePickerIndex)+'"></span></td></tr></table>';updateInstructions(document.getElementById(h),e.rows.length)}function removeFilePicker(b,f,d){var c=document.getElementById(b);for(var a=0;a<c.rows.length;a++){var e=c.rows[a];if(e.id==d){c.deleteRow(e.rowIndex);break}}updateInstructions(document.getElementById(f),c.rows.length)}function updateInstructions(a,b){if(0==b){a.innerHTML=a.innerHTML.replace(" another "," a ")}else{a.innerHTML=a.innerHTML.replace(" a "," another ")}}function mouseEnteredHelpDiv(){_mouseInHelpDiv=true}function mouseExitedHelpDiv(){_mouseInHelpDiv=false;hideHelpDivDelay()}function submitForm(a){if(a==null){return}if(!a.onsubmit||(a.onsubmit()!==false)){a.submit()}}function isTrueOrUndefined(a){return a===undefined||a===true}function handleTabsInTextArea(){console.warn("handleTabsInTextArea() has been migrated to LABKEY.ext.Utils.handleTabsInTextArea()")}function showMenu(a,b,c){console.error("A menu still exists that is attempting to use showMenu(). Element id: "+b)}function verifySelected(d,b,a,g,j,o){var n=0;var c=d.elements;var f=c.length;for(var h=0;h<f;h++){var k=c[h];if(k.type=="checkbox"&&k.checked&&k.name==".select"){n++}}if(n>0){if((window.parent==window)&&(null!=j)){var m=(1==n&&null!=o?o:j);if(!window.confirm(m.replace("${selectedCount}",n))){return false}}d.action=b;d.method=a;return true}else{LABKEY.Utils.alert("Error","Please select one or more "+g+".");return false}}LABKEY.addMarkup('<div id="helpDiv" onMouseOver="mouseEnteredHelpDiv()" onMouseOut="mouseExitedHelpDiv()"   style="display:none;">  <table id="helpDivTable">    <tr class="labkey-wp-header" width="100%">      <td title="Help" class="labkey-wp-title-left" nowrap>        <div><span id="helpDivTitle" class="labkey-wp-title">Title</span></div>      </td>      <td class="labkey-wp-title-right" align="right" style="border-left:0; padding-bottom: 0;">      <img alt="close" src="'+LABKEY.imagePath+'/partdelete.png" onclick="hideHelpDiv(true)">      </td>     </tr>    <tr>      <td colspan=2 style="padding:5px;">        <span id="helpDivBody">Body</span>      </td>    </tr>  </table></div>');if(!LABKEY.internal){LABKEY.internal={}}LABKEY.internal.SortUtil=new function(){return{naturalSort:function(g,k){var p,m,e,o,j=0,f,l,d=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g;if(g===k){return 0}p=g.toLowerCase().match(d);m=k.toLowerCase().match(d);if(p=="null"||m=="null"){var c=p=="null";var h=m=="null";if(c&&h){return 0}return c?-1:1}l=p.length;while(j<l){if(!m[j]){return 1}e=p[j];o=m[j++];if(e!==o){f=e-o;if(!isNaN(f)){return f}return e>o?1:-1}}return m[j]?-1:0}}};